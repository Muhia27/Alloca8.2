<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Your Hotel</title>
    <link rel="stylesheet" href="AdminSide.css">
</head>
<body>
    <div class="form-container">
        <h1>Register Your Hotel</h1>
        <form id="hotelForm" enctype="multipart/form-data">
            <input type="text" class="form-input" name="name" placeholder="Hotel Name" required>
            <textarea class="form-input" name="description" placeholder="Hotel Location" id="locationInput" required></textarea>
            <p id="charCount">Characters: 0/20</p>
            <input type="file" class="form-input" name="image" accept="image/*" required>

            <div>
                <label>Featured:</label>
                <input type="radio" name="isFeatured" value="true"> Yes
                <input type="radio" name="isFeatured" value="false" checked> No
            </div>

            <div>
                <label>Active:</label>
                <input type="radio" name="isActive" value="true" checked> Yes
                <input type="radio" name="isActive" value="false"> No
            </div>
            <br /><br />
            <button type="submit" id="Signup-button">Register Hotel</button>
        </form>
        
    </div>

    <script>
        // Select the location input field and character count display
        const locationInput = document.getElementById('locationInput');
        const charCount = document.getElementById('charCount');
        const maxLength = 20;

        locationInput.addEventListener('input', function () {
            let currentLength = this.value.length;
            charCount.textContent = `Characters: ${currentLength}/${maxLength}`;
            if (currentLength > maxLength) {
                this.value = this.value.slice(0, maxLength);
                charCount.textContent = `Characters: ${maxLength}/${maxLength}`;
            }
        });

        // Hotel Registration Form Submission
        document.getElementById('hotelForm').addEventListener('submit', function (event) {
            event.preventDefault();

            const formData = new FormData(this);
            const ownerID = localStorage.getItem('ownerID'); // Get ownerID from localStorage

            if (!ownerID) {
                alert('Owner ID not found. Please sign up or sign in.');
                return;
            }

            formData.append('ownerID', ownerID); // Add ownerID to form data

            fetch('http://localhost:5056/api/AddHotel/AddHotel', { 
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('Hotel registered successfully!');
                    document.getElementById('hotelForm').reset();
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while registering the hotel.');
                });
        });
    </script>
</body>
</html>