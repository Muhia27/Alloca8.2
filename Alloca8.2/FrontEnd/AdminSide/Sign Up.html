﻿
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Hotel Owner Sign UP</title>
    <link rel="stylesheet" href="AdminSide.css" />
</head>
<body>
    <script src="../api.js"></script>
    <div class="container">
        <h1>Hotel Owner Sign Up</h1>
        <div class="form-container">
            <input type="text" placeholder="UserName" class="form-input" id="username" required />
            <input type="email" placeholder="Email" class="form-input" id="email" required />
            <input type="password" placeholder="Password" class="form-input" id="password" required />
            <button id="Signup-button">Sign Up</button>
            <p>Already have an account? <a href="Sign In.html">Sign In</a></p>
            <p><a href="../Sign/Sign.html">Join as: </a></p>
        </div>
    </div>
    <script>
        function generateGuid() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const role = localStorage.getItem('selectedRole');

            if (!role) {
                alert('Role not selected. Redirecting to selection page...');
                window.location.href = '../Sign/Sign.html';
                return;
            }

            // Create a hidden input field for role
            const roleInput = document.createElement('input');
            roleInput.type = 'hidden';
            roleInput.name = 'role';
            roleInput.value = role === 'hotelOwner' ? 2 : 1; // Assuming 2 for hotelOwner
            document.querySelector('.form-container').appendChild(roleInput);

            // Generate and add ownerID for hotel owners
            if (role === 'hotelOwner') {
                const ownerID = generateGuid();
                const ownerIdInput = document.createElement('input');
                ownerIdInput.type = 'hidden';
                ownerIdInput.name = 'ownerID';
                ownerIdInput.value = ownerID;
                document.querySelector('.form-container').appendChild(ownerIdInput);
            }
        });

        document.getElementById("Signup-button").addEventListener("click", () => {
            const userName = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const role = localStorage.getItem('selectedRole');
            const ownerID = localStorage.getItem('selectedRole') === 'hotelOwner' ? document.querySelector('input[name="ownerID"]').value : null;

            registerUser(userName, email, password, role, ownerID); // Pass ownerID
        });

    </script>
</body>
</html>